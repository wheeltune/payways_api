Управление зависимостями проекта
================================

Обновление пакетов происходит командой `pip-sync`. Эта утилита удобнее `pip` 
тем, что не просто установит нужные зависимости, но и удалит все лишние зависимости, 
не указанные в файле `requirements.txt`. Для запуска достаточно запустить
`pip-sync` в директории с `requirements.txt`

    cd path/to/requirements_txt/containing/folder
    pip-sync

`requirements.txt` в данный момент настроен так, чтобы брать все зависимости из файла
`requirements/dev.txt`, который включает `base-` и `dev-` зависимости.

При первом запуске `pip-sync` в вашем виртуальном окружении может 
отсутствовать, так что нужно однократно воспользоваться `pip install`:

    pip install pip-tools

В дальнейшем лучше использовать `pip-sync`.

Файлы
-----

- `Makefile` -
    файл для сборки .txt-файлов из .in-файлов
- `base.in` -
    файл, в котором руками прописываются базовые зависимости, 
    без которых не работает проект
- `dev.in` -
    файл, в который руками прописываются зависимости, облегчающие разработку. 
    Включает в себя все зависимости из base.in с тем же версиями
- `base.txt` -
    скомпилированный файл c базовыми зависимостями.
- `dev.txt` -
    скомпилированный файл с зависимостями для разработки.

Добавление новой зависимости
----------------------------

Во-первых, не надо использовать `pip install` с именем пакета. Это установит пакет 
локально, и вы забудете сделать `pip freeze` и обновить зависимости.

Делаем так:

1. Редактируем `base.in` или `dev.in` для добавления `base-` или `dev-` зависисости
1. Выполняем команду `make` в дирректории `/requirements`
1. Коммитим как изменившиеся `.in-` файлы, так и их перекомпилированные `.txt` -версии

Обновление пакетов происходит командой `pip-sync`.

Ссылки и литература
-------------------

- Структура папки `/requirements` и `Makefile` взяты из статьи
http://jamescooke.info/a-successful-pip-tools-workflow-for-managing-python-package-requirements.html

- Общая информация по использованию `pip-compile` и `pip-sync`
https://github.com/jazzband/pip-tools
